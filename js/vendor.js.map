{"version":3,"sources":["vendor.js"],"names":[],"mappings":"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","file":"vendor.js","sourcesContent":["/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */\n/* Geodesy representation conversion functions                        (c) Chris Veness 2002-2016  */\n/*                                                                                   MIT Licence  */\n/* www.movable-type.co.uk/scripts/latlong.html                                                    */\n/* www.movable-type.co.uk/scripts/geodesy/docs/module-dms.html                                    */\n/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */\n\n'use strict';\n/* eslint no-irregular-whitespace: [2, { skipComments: true }] */\n\n\n/**\n * Latitude/longitude points may be represented as decimal degrees, or subdivided into sexagesimal\n * minutes and seconds.\n *\n * @module dms\n */\n\n\n/**\n * Functions for parsing and representing degrees / minutes / seconds.\n * @class Dms\n */\nvar Dms = {};\n\n// note Unicode Degree = U+00B0. Prime = U+2032, Double prime = U+2033\n\n\n/**\n * Parses string representing degrees/minutes/seconds into numeric degrees.\n *\n * This is very flexible on formats, allowing signed decimal degrees, or deg-min-sec optionally\n * suffixed by compass direction (NSEW). A variety of separators are accepted (eg 3° 37′ 09″W).\n * Seconds and minutes may be omitted.\n *\n * @param   {string|number} dmsStr - Degrees or deg/min/sec in variety of formats.\n * @returns {number} Degrees as decimal number.\n *\n * @example\n *     var lat = Dms.parseDMS('51° 28′ 40.12″ N');\n *     var lon = Dms.parseDMS('000° 00′ 05.31″ W');\n *     var p1 = new LatLon(lat, lon); // 51.4778°N, 000.0015°W\n */\nDms.parseDMS = function(dmsStr) {\n    // check for signed decimal degrees without NSEW, if so return it directly\n    if (typeof dmsStr == 'number' && isFinite(dmsStr)) return Number(dmsStr);\n\n    // strip off any sign or compass dir'n & split out separate d/m/s\n    var dms = String(dmsStr).trim().replace(/^-/, '').replace(/[NSEW]$/i, '').split(/[^0-9.,]+/);\n    if (dms[dms.length-1]=='') dms.splice(dms.length-1);  // from trailing symbol\n\n    if (dms == '') return NaN;\n\n    // and convert to decimal degrees...\n    var deg;\n    switch (dms.length) {\n        case 3:  // interpret 3-part result as d/m/s\n            deg = dms[0]/1 + dms[1]/60 + dms[2]/3600;\n            break;\n        case 2:  // interpret 2-part result as d/m\n            deg = dms[0]/1 + dms[1]/60;\n            break;\n        case 1:  // just d (possibly decimal) or non-separated dddmmss\n            deg = dms[0];\n            // check for fixed-width unseparated format eg 0033709W\n            //if (/[NS]/i.test(dmsStr)) deg = '0' + deg;  // - normalise N/S to 3-digit degrees\n            //if (/[0-9]{7}/.test(deg)) deg = deg.slice(0,3)/1 + deg.slice(3,5)/60 + deg.slice(5)/3600;\n            break;\n        default:\n            return NaN;\n    }\n    if (/^-|[WS]$/i.test(dmsStr.trim())) deg = -deg; // take '-', west and south as -ve\n\n    return Number(deg);\n};\n\n\n/**\n * Separator character to be used to separate degrees, minutes, seconds, and cardinal directions.\n *\n * Set to '\\u202f' (narrow no-break space) for improved formatting.\n *\n * @example\n *   var p = new LatLon(51.2, 0.33);  // 51°12′00.0″N, 000°19′48.0″E\n *   Dms.separator = '\\u202f';        // narrow no-break space\n *   var pʹ = new LatLon(51.2, 0.33); // 51° 12′ 00.0″ N, 000° 19′ 48.0″ E\n */\nDms.separator = '';\n\n\n/**\n * Converts decimal degrees to deg/min/sec format\n *  - degree, prime, double-prime symbols are added, but sign is discarded, though no compass\n *    direction is added.\n *\n * @private\n * @param   {number} deg - Degrees to be formatted as specified.\n * @param   {string} [format=dms] - Return value as 'd', 'dm', 'dms' for deg, deg+min, deg+min+sec.\n * @param   {number} [dp=0|2|4] - Number of decimal places to use – default 0 for dms, 2 for dm, 4 for d.\n * @returns {string} Degrees formatted as deg/min/secs according to specified format.\n */\nDms.toDMS = function(deg, format, dp) {\n    if (isNaN(deg)) return null;  // give up here if we can't make a number from deg\n\n    // default values\n    if (format === undefined) format = 'dms';\n    if (dp === undefined) {\n        switch (format) {\n            case 'd':    case 'deg':         dp = 4; break;\n            case 'dm':   case 'deg+min':     dp = 2; break;\n            case 'dms':  case 'deg+min+sec': dp = 0; break;\n            default:    format = 'dms'; dp = 0;  // be forgiving on invalid format\n        }\n    }\n\n    deg = Math.abs(deg);  // (unsigned result ready for appending compass dir'n)\n\n    var dms, d, m, s;\n    switch (format) {\n        default: // invalid format spec!\n        case 'd': case 'deg':\n            d = deg.toFixed(dp);    // round degrees\n            if (d<100) d = '0' + d; // pad with leading zeros\n            if (d<10) d = '0' + d;\n            dms = d + '°';\n            break;\n        case 'dm': case 'deg+min':\n            var min = (deg*60).toFixed(dp); // convert degrees to minutes & round\n            d = Math.floor(min / 60);       // get component deg/min\n            m = (min % 60).toFixed(dp);     // pad with trailing zeros\n            if (d<100) d = '0' + d;         // pad with leading zeros\n            if (d<10) d = '0' + d;\n            if (m<10) m = '0' + m;\n            dms = d + '°'+Dms.separator + m + '′';\n            break;\n        case 'dms': case 'deg+min+sec':\n            var sec = (deg*3600).toFixed(dp); // convert degrees to seconds & round\n            d = Math.floor(sec / 3600);       // get component deg/min/sec\n            m = Math.floor(sec/60) % 60;\n            s = (sec % 60).toFixed(dp);       // pad with trailing zeros\n            if (d<100) d = '0' + d;           // pad with leading zeros\n            if (d<10) d = '0' + d;\n            if (m<10) m = '0' + m;\n            if (s<10) s = '0' + s;\n            dms = d + '°'+Dms.separator + m + '′'+Dms.separator + s + '″';\n            break;\n    }\n\n    return dms;\n};\n\n\n/**\n * Converts numeric degrees to deg/min/sec latitude (2-digit degrees, suffixed with N/S).\n *\n * @param   {number} deg - Degrees to be formatted as specified.\n * @param   {string} [format=dms] - Return value as 'd', 'dm', 'dms' for deg, deg+min, deg+min+sec.\n * @param   {number} [dp=0|2|4] - Number of decimal places to use – default 0 for dms, 2 for dm, 4 for d.\n * @returns {string} Degrees formatted as deg/min/secs according to specified format.\n */\nDms.toLat = function(deg, format, dp) {\n    var lat = Dms.toDMS(deg, format, dp);\n    return lat===null ? '–' : lat.slice(1)+Dms.separator + (deg<0 ? 'S' : 'N');  // knock off initial '0' for lat!\n};\n\n\n/**\n * Convert numeric degrees to deg/min/sec longitude (3-digit degrees, suffixed with E/W)\n *\n * @param   {number} deg - Degrees to be formatted as specified.\n * @param   {string} [format=dms] - Return value as 'd', 'dm', 'dms' for deg, deg+min, deg+min+sec.\n * @param   {number} [dp=0|2|4] - Number of decimal places to use – default 0 for dms, 2 for dm, 4 for d.\n * @returns {string} Degrees formatted as deg/min/secs according to specified format.\n */\nDms.toLon = function(deg, format, dp) {\n    var lon = Dms.toDMS(deg, format, dp);\n    return lon===null ? '–' : lon+Dms.separator + (deg<0 ? 'W' : 'E');\n};\n\n\n/**\n * Converts numeric degrees to deg/min/sec as a bearing (0°..360°)\n *\n * @param   {number} deg - Degrees to be formatted as specified.\n * @param   {string} [format=dms] - Return value as 'd', 'dm', 'dms' for deg, deg+min, deg+min+sec.\n * @param   {number} [dp=0|2|4] - Number of decimal places to use – default 0 for dms, 2 for dm, 4 for d.\n * @returns {string} Degrees formatted as deg/min/secs according to specified format.\n */\nDms.toBrng = function(deg, format, dp) {\n    deg = (Number(deg)+360) % 360;  // normalise -ve values to 180°..360°\n    var brng =  Dms.toDMS(deg, format, dp);\n    return brng===null ? '–' : brng.replace('360', '0');  // just in case rounding took us up to 360°!\n};\n\n\n/**\n * Returns compass point (to given precision) for supplied bearing.\n *\n * @param   {number} bearing - Bearing in degrees from north.\n * @param   {number} [precision=3] - Precision (1:cardinal / 2:intercardinal / 3:secondary-intercardinal).\n * @returns {string} Compass point for supplied bearing.\n *\n * @example\n *   var point = Dms.compassPoint(24);    // point = 'NNE'\n *   var point = Dms.compassPoint(24, 1); // point = 'N'\n */\nDms.compassPoint = function(bearing, precision) {\n    if (precision === undefined) precision = 3;\n    // note precision = max length of compass point; it could be extended to 4 for quarter-winds\n    // (eg NEbN), but I think they are little used\n\n    bearing = ((bearing%360)+360)%360; // normalise to 0..360\n\n    var point;\n\n    switch (precision) {\n        case 1: // 4 compass points\n            switch (Math.round(bearing*4/360)%4) {\n                case 0: point = 'N'; break;\n                case 1: point = 'E'; break;\n                case 2: point = 'S'; break;\n                case 3: point = 'W'; break;\n            }\n            break;\n        case 2: // 8 compass points\n            switch (Math.round(bearing*8/360)%8) {\n                case 0: point = 'N';  break;\n                case 1: point = 'NE'; break;\n                case 2: point = 'E';  break;\n                case 3: point = 'SE'; break;\n                case 4: point = 'S';  break;\n                case 5: point = 'SW'; break;\n                case 6: point = 'W';  break;\n                case 7: point = 'NW'; break;\n            }\n            break;\n        case 3: // 16 compass points\n            switch (Math.round(bearing*16/360)%16) {\n                case  0: point = 'N';   break;\n                case  1: point = 'NNE'; break;\n                case  2: point = 'NE';  break;\n                case  3: point = 'ENE'; break;\n                case  4: point = 'E';   break;\n                case  5: point = 'ESE'; break;\n                case  6: point = 'SE';  break;\n                case  7: point = 'SSE'; break;\n                case  8: point = 'S';   break;\n                case  9: point = 'SSW'; break;\n                case 10: point = 'SW';  break;\n                case 11: point = 'WSW'; break;\n                case 12: point = 'W';   break;\n                case 13: point = 'WNW'; break;\n                case 14: point = 'NW';  break;\n                case 15: point = 'NNW'; break;\n            }\n            break;\n        default:\n            throw new RangeError('Precision must be between 1 and 3');\n    }\n\n    return point;\n};\n\n\n/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */\n\n/** Polyfill String.trim for old browsers\n *  (q.v. blog.stevenlevithan.com/archives/faster-trim-javascript) */\nif (String.prototype.trim === undefined) {\n    String.prototype.trim = function() {\n        return String(this).replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n    };\n}\n\n/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */\nif (typeof module != 'undefined' && module.exports) module.exports = Dms; // ≡ export default Dms\n\n/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */\n/* Geodesy tools for an ellipsoidal earth model                       (c) Chris Veness 2005-2016  */\n/*                                                                                   MIT Licence  */\n/* www.movable-type.co.uk/scripts/latlong-convert-coords.html                                     */\n/* www.movable-type.co.uk/scripts/geodesy/docs/module-latlon-ellipsoidal.html                     */\n/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */\n\n'use strict';\nif (typeof module!='undefined' && module.exports) var Vector3d = require('./vector3d.js'); // ≡ import Vector3d from 'vector3d.js'\nif (typeof module!='undefined' && module.exports) var Dms = require('./dms.js');           // ≡ import Dms from 'dms.js'\n\n\n/**\n * Library of geodesy functions for operations on an ellipsoidal earth model.\n *\n * Includes ellipsoid parameters and datums for different coordinate systems, and methods for\n * converting between them and to cartesian coordinates.\n *\n * q.v. Ordnance Survey ‘A guide to coordinate systems in Great Britain’ Section 6\n * www.ordnancesurvey.co.uk/docs/support/guide-coordinate-systems-great-britain.pdf.\n *\n * @module   latlon-ellipsoidal\n * @requires dms\n */\n\n\n/**\n * Creates lat/lon (polar) point with latitude & longitude values, on a specified datum.\n *\n * @constructor\n * @param {number}       lat - Geodetic latitude in degrees.\n * @param {number}       lon - Longitude in degrees.\n * @param {LatLon.datum} [datum=WGS84] - Datum this point is defined within.\n *\n * @example\n *     var p1 = new LatLon(51.4778, -0.0016, LatLon.datum.WGS84);\n */\nfunction LatLon(lat, lon, datum) {\n    // allow instantiation without 'new'\n    if (!(this instanceof LatLon)) return new LatLon(lat, lon, datum);\n\n    if (datum === undefined) datum = LatLon.datum.WGS84;\n\n    this.lat = Number(lat);\n    this.lon = Number(lon);\n    this.datum = datum;\n}\n\n\n/**\n * Ellipsoid parameters; major axis (a), minor axis (b), and flattening (f) for each ellipsoid.\n */\nLatLon.ellipsoid = {\n    WGS84:        { a: 6378137,     b: 6356752.31425, f: 1/298.257223563 },\n    GRS80:        { a: 6378137,     b: 6356752.31414, f: 1/298.257222101 },\n    Airy1830:     { a: 6377563.396, b: 6356256.909,   f: 1/299.3249646   },\n    AiryModified: { a: 6377340.189, b: 6356034.448,   f: 1/299.3249646   },\n    Intl1924:     { a: 6378388,     b: 6356911.946,   f: 1/297           },\n    Bessel1841:   { a: 6377397.155, b: 6356078.963,   f: 1/299.152815351 },\n};\n\n/**\n * Datums; with associated ellipsoid, and Helmert transform parameters to convert from WGS 84 into\n * given datum.\n *\n * More are available from earth-info.nga.mil/GandG/coordsys/datums/NATO_DT.pdf,\n * www.fieldenmaps.info/cconv/web/cconv_params.js\n */\nLatLon.datum = {\n    /* eslint key-spacing: 0, comma-dangle: 0 */\n    WGS84: {\n        ellipsoid: LatLon.ellipsoid.WGS84,\n        transform: { tx:    0.0,    ty:    0.0,     tz:    0.0,    // m\n                     rx:    0.0,    ry:    0.0,     rz:    0.0,    // sec\n                      s:    0.0 }                                  // ppm\n    },\n    NAD83: { // (2009); functionally ≡ WGS84 - www.uvm.edu/giv/resources/WGS84_NAD83.pdf\n        ellipsoid: LatLon.ellipsoid.GRS80,\n        transform: { tx:    1.004,  ty:   -1.910,   tz:   -0.515,  // m\n                     rx:    0.0267, ry:    0.00034, rz:    0.011,  // sec\n                      s:   -0.0015 }                               // ppm\n    }, // note: if you *really* need to convert WGS84<->NAD83, you need more knowledge than this!\n    OSGB36: { // www.ordnancesurvey.co.uk/docs/support/guide-coordinate-systems-great-britain.pdf\n        ellipsoid: LatLon.ellipsoid.Airy1830,\n        transform: { tx: -446.448,  ty:  125.157,   tz: -542.060,  // m\n                     rx:   -0.1502, ry:   -0.2470,  rz:   -0.8421, // sec\n                      s:   20.4894 }                               // ppm\n    },\n    ED50: { // www.gov.uk/guidance/oil-and-gas-petroleum-operations-notices#pon-4\n        ellipsoid: LatLon.ellipsoid.Intl1924,\n        transform: { tx:   89.5,    ty:   93.8,     tz:  123.1,    // m\n                     rx:    0.0,    ry:    0.0,     rz:    0.156,  // sec\n                      s:   -1.2 }                                  // ppm\n    },\n    Irl1975: { // osi.ie/OSI/media/OSI/Content/Publications/transformations_booklet.pdf\n        ellipsoid: LatLon.ellipsoid.AiryModified,\n        transform: { tx: -482.530,  ty:  130.596,   tz: -564.557,  // m\n                     rx:   -1.042,  ry:   -0.214,   rz:   -0.631,  // sec\n                      s:   -8.150 }                                // ppm\n    }, // note: many sources have opposite sign to rotations - to be checked!\n    TokyoJapan: { // www.geocachingtoolbox.com?page=datumEllipsoidDetails\n        ellipsoid: LatLon.ellipsoid.Bessel1841,\n        transform: { tx:  148,      ty: -507,       tz: -685,      // m\n                     rx:    0,      ry:    0,       rz:    0,      // sec\n                      s:    0 }                                    // ppm\n    },\n};\n\n\n/**\n * Converts ‘this’ lat/lon coordinate to new coordinate system.\n *\n * @param   {LatLon.datum} toDatum - Datum this coordinate is to be converted to.\n * @returns {LatLon} This point converted to new datum.\n *\n * @example\n *     var pWGS84 = new LatLon(51.4778, -0.0016, LatLon.datum.WGS84);\n *     var pOSGB = pWGS84.convertDatum(LatLon.datum.OSGB36); // 51.4773°N, 000.0000°E\n */\nLatLon.prototype.convertDatum = function(toDatum) {\n    var oldLatLon = this;\n    var transform;\n\n    if (oldLatLon.datum == LatLon.datum.WGS84) {\n        // converting from WGS 84\n        transform = toDatum.transform;\n    }\n    if (toDatum == LatLon.datum.WGS84) {\n        // converting to WGS 84; use inverse transform (don't overwrite original!)\n        transform = {};\n        for (var param in oldLatLon.datum.transform) {\n            if (oldLatLon.datum.transform.hasOwnProperty(param)) {\n                transform[param] = -oldLatLon.datum.transform[param];\n            }\n        }\n    }\n    if (transform === undefined) {\n        // neither this.datum nor toDatum are WGS84: convert this to WGS84 first\n        oldLatLon = this.convertDatum(LatLon.datum.WGS84);\n        transform = toDatum.transform;\n    }\n\n    var oldCartesian = oldLatLon.toCartesian();                // convert polar to cartesian...\n    var newCartesian = oldCartesian.applyTransform(transform); // ...apply transform...\n    var newLatLon = newCartesian.toLatLonE(toDatum);           // ...and convert cartesian to polar\n\n    return newLatLon;\n};\n\n\n/**\n * Converts ‘this’ point from (geodetic) latitude/longitude coordinates to (geocentric) cartesian\n * (x/y/z) coordinates.\n *\n * @returns {Vector3d} Vector pointing to lat/lon point, with x, y, z in metres from earth centre.\n */\nLatLon.prototype.toCartesian = function() {\n    var φ = this.lat.toRadians(), λ = this.lon.toRadians();\n    var h = 0; // height above ellipsoid - not currently used\n    var a = this.datum.ellipsoid.a, f = this.datum.ellipsoid.f;\n\n    var sinφ = Math.sin(φ), cosφ = Math.cos(φ);\n    var sinλ = Math.sin(λ), cosλ = Math.cos(λ);\n\n    var eSq = 2*f - f*f;                      // 1st eccentricity squared ≡ (a²-b²)/a²\n    var ν = a / Math.sqrt(1 - eSq*sinφ*sinφ); // radius of curvature in prime vertical\n\n    var x = (ν+h) * cosφ * cosλ;\n    var y = (ν+h) * cosφ * sinλ;\n    var z = (ν*(1-eSq)+h) * sinφ;\n\n    var point = new Vector3d(x, y, z);\n\n    return point;\n};\n\n\n/**\n * Converts ‘this’ (geocentric) cartesian (x/y/z) point to (ellipsoidal geodetic) latitude/longitude\n * coordinates on specified datum.\n *\n * Uses Bowring’s (1985) formulation for μm precision in concise form.\n *\n * @param {LatLon.datum.transform} datum - Datum to use when converting point.\n */\nVector3d.prototype.toLatLonE = function(datum) {\n    var x = this.x, y = this.y, z = this.z;\n    var a = datum.ellipsoid.a, b = datum.ellipsoid.b, f = datum.ellipsoid.f;\n\n    var e2 = 2*f - f*f;   // 1st eccentricity squared ≡ (a²-b²)/a²\n    var ε2 = e2 / (1-e2); // 2nd eccentricity squared ≡ (a²-b²)/b²\n    var p = Math.sqrt(x*x + y*y); // distance from minor axis\n    var R = Math.sqrt(p*p + z*z); // polar radius\n\n    // parametric latitude (Bowring eqn 17, replacing tanβ = z·a / p·b)\n    var tanβ = (b*z)/(a*p) * (1+ε2*b/R);\n    var sinβ = tanβ / Math.sqrt(1+tanβ*tanβ);\n    var cosβ = sinβ / tanβ;\n\n    // geodetic latitude (Bowring eqn 18: tanφ = z+ε²bsin³β / p−e²cos³β)\n    var φ = isNaN(cosβ) ? 0 : Math.atan2(z + ε2*b*sinβ*sinβ*sinβ, p - e2*a*cosβ*cosβ*cosβ);\n\n    // longitude\n    var λ = Math.atan2(y, x);\n\n    // height above ellipsoid (Bowring eqn 7) [not currently used]\n    var sinφ = Math.sin(φ), cosφ = Math.cos(φ);\n    var ν = a/Math.sqrt(1-e2*sinφ*sinφ); // length of the normal terminated by the minor axis\n    var h = p*cosφ + z*sinφ - (a*a/ν);\n\n    var point = new LatLon(φ.toDegrees(), λ.toDegrees(), datum);\n\n    return point;\n};\n\n/**\n * Applies Helmert transform to ‘this’ point using transform parameters t.\n *\n * @private\n * @param {LatLon.datum.transform} t - Transform to apply to this point.\n */\nVector3d.prototype.applyTransform = function(t)   {\n    var x1 = this.x, y1 = this.y, z1 = this.z;\n\n    var tx = t.tx, ty = t.ty, tz = t.tz;\n    var rx = (t.rx/3600).toRadians(); // normalise seconds to radians\n    var ry = (t.ry/3600).toRadians(); // normalise seconds to radians\n    var rz = (t.rz/3600).toRadians(); // normalise seconds to radians\n    var s1 = t.s/1e6 + 1;             // normalise ppm to (s+1)\n\n    // apply transform\n    var x2 = tx + x1*s1 - y1*rz + z1*ry;\n    var y2 = ty + x1*rz + y1*s1 - z1*rx;\n    var z2 = tz - x1*ry + y1*rx + z1*s1;\n\n    var point = new Vector3d(x2, y2, z2);\n\n    return point;\n};\n\n\n/**\n * Returns a string representation of ‘this’ point, formatted as degrees, degrees+minutes, or\n * degrees+minutes+seconds.\n *\n * @param   {string} [format=dms] - Format point as 'd', 'dm', 'dms'.\n * @param   {number} [dp=0|2|4] - Number of decimal places to use - default 0 for dms, 2 for dm, 4 for d.\n * @returns {string} Comma-separated latitude/longitude.\n */\nLatLon.prototype.toString = function(format, dp) {\n    return Dms.toLat(this.lat, format, dp) + ', ' + Dms.toLon(this.lon, format, dp);\n};\n\n\n/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */\n\n/** Extend Number object with method to convert numeric degrees to radians */\nif (Number.prototype.toRadians === undefined) {\n    Number.prototype.toRadians = function() { return this * Math.PI / 180; };\n}\n\n/** Extend Number object with method to convert radians to numeric (signed) degrees */\nif (Number.prototype.toDegrees === undefined) {\n    Number.prototype.toDegrees = function() { return this * 180 / Math.PI; };\n}\n\n/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */\nif (typeof module != 'undefined' && module.exports) module.exports = LatLon, module.exports.Vector3d = Vector3d; // ≡ export { LatLon as default, Vector3d }\n\n/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */\n/* Ordnance Survey Grid Reference functions                           (c) Chris Veness 2005-2016  */\n/*                                                                                   MIT Licence  */\n/* www.movable-type.co.uk/scripts/latlong-gridref.html                                            */\n/* www.movable-type.co.uk/scripts/geodesy/docs/module-osgridref.html                              */\n/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */\n\n'use strict';\nif (typeof module!='undefined' && module.exports) var LatLon = require('./latlon-ellipsoidal.js'); // ≡ import LatLon from 'latlon-ellipsoidal.js'\n\n\n/**\n * Convert OS grid references to/from OSGB latitude/longitude points.\n *\n * Formulation implemented here due to Thomas, Redfearn, etc is as published by OS, but is inferior\n * to Krüger as used by e.g. Karney 2011.\n *\n * www.ordnancesurvey.co.uk/docs/support/guide-coordinate-systems-great-britain.pdf.\n *\n * @module   osgridref\n * @requires latlon-ellipsoidal\n */\n/*\n * Converted 2015 to work with WGS84 by default, OSGB36 as option;\n * www.ordnancesurvey.co.uk/blog/2014/12/confirmation-on-changes-to-latitude-and-longitude\n */\n\n\n/**\n * Creates an OsGridRef object.\n *\n * @constructor\n * @param {number} easting - Easting in metres from OS false origin.\n * @param {number} northing - Northing in metres from OS false origin.\n *\n * @example\n *   var grid = new OsGridRef(651409, 313177);\n */\nfunction OsGridRef(easting, northing) {\n    // allow instantiation without 'new'\n    if (!(this instanceof OsGridRef)) return new OsGridRef(easting, northing);\n\n    this.easting = Number(easting);\n    this.northing = Number(northing);\n}\n\n\n/**\n * Converts latitude/longitude to Ordnance Survey grid reference easting/northing coordinate.\n *\n * Note formulation implemented here due to Thomas, Redfearn, etc is as published by OS, but is\n * inferior to Krüger as used by e.g. Karney 2011.\n *\n * @param   {LatLon}    point - latitude/longitude.\n * @returns {OsGridRef} OS Grid Reference easting/northing.\n *\n * @example\n *   var p = new LatLon(52.65798, 1.71605);\n *   var grid = OsGridRef.latLonToOsGrid(p); // grid.toString(): TG 51409 13177\n *   // for conversion of (historical) OSGB36 latitude/longitude point:\n *   var p = new LatLon(52.65757, 1.71791, LatLon.datum.OSGB36);\n */\nOsGridRef.latLonToOsGrid = function(point) {\n    if (!(point instanceof LatLon)) throw new TypeError('point is not LatLon object');\n\n    // if necessary convert to OSGB36 first\n    if (point.datum != LatLon.datum.OSGB36) point = point.convertDatum(LatLon.datum.OSGB36);\n\n    var φ = point.lat.toRadians();\n    var λ = point.lon.toRadians();\n\n    var a = 6377563.396, b = 6356256.909;              // Airy 1830 major & minor semi-axes\n    var F0 = 0.9996012717;                             // NatGrid scale factor on central meridian\n    var φ0 = (49).toRadians(), λ0 = (-2).toRadians();  // NatGrid true origin is 49°N,2°W\n    var N0 = -100000, E0 = 400000;                     // northing & easting of true origin, metres\n    var e2 = 1 - (b*b)/(a*a);                          // eccentricity squared\n    var n = (a-b)/(a+b), n2 = n*n, n3 = n*n*n;         // n, n², n³\n\n    var cosφ = Math.cos(φ), sinφ = Math.sin(φ);\n    var ν = a*F0/Math.sqrt(1-e2*sinφ*sinφ);            // nu = transverse radius of curvature\n    var ρ = a*F0*(1-e2)/Math.pow(1-e2*sinφ*sinφ, 1.5); // rho = meridional radius of curvature\n    var η2 = ν/ρ-1;                                    // eta = ?\n\n    var Ma = (1 + n + (5/4)*n2 + (5/4)*n3) * (φ-φ0);\n    var Mb = (3*n + 3*n*n + (21/8)*n3) * Math.sin(φ-φ0) * Math.cos(φ+φ0);\n    var Mc = ((15/8)*n2 + (15/8)*n3) * Math.sin(2*(φ-φ0)) * Math.cos(2*(φ+φ0));\n    var Md = (35/24)*n3 * Math.sin(3*(φ-φ0)) * Math.cos(3*(φ+φ0));\n    var M = b * F0 * (Ma - Mb + Mc - Md);              // meridional arc\n\n    var cos3φ = cosφ*cosφ*cosφ;\n    var cos5φ = cos3φ*cosφ*cosφ;\n    var tan2φ = Math.tan(φ)*Math.tan(φ);\n    var tan4φ = tan2φ*tan2φ;\n\n    var I = M + N0;\n    var II = (ν/2)*sinφ*cosφ;\n    var III = (ν/24)*sinφ*cos3φ*(5-tan2φ+9*η2);\n    var IIIA = (ν/720)*sinφ*cos5φ*(61-58*tan2φ+tan4φ);\n    var IV = ν*cosφ;\n    var V = (ν/6)*cos3φ*(ν/ρ-tan2φ);\n    var VI = (ν/120) * cos5φ * (5 - 18*tan2φ + tan4φ + 14*η2 - 58*tan2φ*η2);\n\n    var Δλ = λ-λ0;\n    var Δλ2 = Δλ*Δλ, Δλ3 = Δλ2*Δλ, Δλ4 = Δλ3*Δλ, Δλ5 = Δλ4*Δλ, Δλ6 = Δλ5*Δλ;\n\n    var N = I + II*Δλ2 + III*Δλ4 + IIIA*Δλ6;\n    var E = E0 + IV*Δλ + V*Δλ3 + VI*Δλ5;\n\n    N = Number(N.toFixed(3)); // round to mm precision\n    E = Number(E.toFixed(3));\n\n    return new OsGridRef(E, N); // gets truncated to SW corner of 1m grid square\n};\n\n\n/**\n * Converts Ordnance Survey grid reference easting/northing coordinate to latitude/longitude\n * (SW corner of grid square).\n *\n * Note formulation implemented here due to Thomas, Redfearn, etc is as published by OS, but is\n * inferior to Krüger as used by e.g. Karney 2011.\n *\n * @param   {OsGridRef}    gridref - Grid ref E/N to be converted to lat/long (SW corner of grid square).\n * @param   {LatLon.datum} [datum=WGS84] - Datum to convert grid reference into.\n * @returns {LatLon}       Latitude/longitude of supplied grid reference.\n *\n * @example\n *   var gridref = new OsGridRef(651409.903, 313177.270);\n *   var pWgs84 = OsGridRef.osGridToLatLon(gridref);                     // 52°39′28.723″N, 001°42′57.787″E\n *   // to obtain (historical) OSGB36 latitude/longitude point:\n *   var pOsgb = OsGridRef.osGridToLatLon(gridref, LatLon.datum.OSGB36); // 52°39′27.253″N, 001°43′04.518″E\n */\nOsGridRef.osGridToLatLon = function(gridref, datum) {\n    if (!(gridref instanceof OsGridRef)) throw new TypeError('gridref is not OsGridRef object');\n    if (datum === undefined) datum = LatLon.datum.WGS84;\n\n    var E = gridref.easting;\n    var N = gridref.northing;\n\n    var a = 6377563.396, b = 6356256.909;              // Airy 1830 major & minor semi-axes\n    var F0 = 0.9996012717;                             // NatGrid scale factor on central meridian\n    var φ0 = (49).toRadians(), λ0 = (-2).toRadians();  // NatGrid true origin is 49°N,2°W\n    var N0 = -100000, E0 = 400000;                     // northing & easting of true origin, metres\n    var e2 = 1 - (b*b)/(a*a);                          // eccentricity squared\n    var n = (a-b)/(a+b), n2 = n*n, n3 = n*n*n;         // n, n², n³\n\n    var φ=φ0, M=0;\n    do {\n        φ = (N-N0-M)/(a*F0) + φ;\n\n        var Ma = (1 + n + (5/4)*n2 + (5/4)*n3) * (φ-φ0);\n        var Mb = (3*n + 3*n*n + (21/8)*n3) * Math.sin(φ-φ0) * Math.cos(φ+φ0);\n        var Mc = ((15/8)*n2 + (15/8)*n3) * Math.sin(2*(φ-φ0)) * Math.cos(2*(φ+φ0));\n        var Md = (35/24)*n3 * Math.sin(3*(φ-φ0)) * Math.cos(3*(φ+φ0));\n        M = b * F0 * (Ma - Mb + Mc - Md);              // meridional arc\n\n    } while (N-N0-M >= 0.00001);  // ie until < 0.01mm\n\n    var cosφ = Math.cos(φ), sinφ = Math.sin(φ);\n    var ν = a*F0/Math.sqrt(1-e2*sinφ*sinφ);            // nu = transverse radius of curvature\n    var ρ = a*F0*(1-e2)/Math.pow(1-e2*sinφ*sinφ, 1.5); // rho = meridional radius of curvature\n    var η2 = ν/ρ-1;                                    // eta = ?\n\n    var tanφ = Math.tan(φ);\n    var tan2φ = tanφ*tanφ, tan4φ = tan2φ*tan2φ, tan6φ = tan4φ*tan2φ;\n    var secφ = 1/cosφ;\n    var ν3 = ν*ν*ν, ν5 = ν3*ν*ν, ν7 = ν5*ν*ν;\n    var VII = tanφ/(2*ρ*ν);\n    var VIII = tanφ/(24*ρ*ν3)*(5+3*tan2φ+η2-9*tan2φ*η2);\n    var IX = tanφ/(720*ρ*ν5)*(61+90*tan2φ+45*tan4φ);\n    var X = secφ/ν;\n    var XI = secφ/(6*ν3)*(ν/ρ+2*tan2φ);\n    var XII = secφ/(120*ν5)*(5+28*tan2φ+24*tan4φ);\n    var XIIA = secφ/(5040*ν7)*(61+662*tan2φ+1320*tan4φ+720*tan6φ);\n\n    var dE = (E-E0), dE2 = dE*dE, dE3 = dE2*dE, dE4 = dE2*dE2, dE5 = dE3*dE2, dE6 = dE4*dE2, dE7 = dE5*dE2;\n    φ = φ - VII*dE2 + VIII*dE4 - IX*dE6;\n    var λ = λ0 + X*dE - XI*dE3 + XII*dE5 - XIIA*dE7;\n\n    var point =  new LatLon(φ.toDegrees(), λ.toDegrees(), LatLon.datum.OSGB36);\n    if (datum != LatLon.datum.OSGB36) point = point.convertDatum(datum);\n\n    return point;\n};\n\n\n/**\n * Parses grid reference to OsGridRef object.\n *\n * Accepts standard grid references (eg 'SU 387 148'), with or without whitespace separators, from\n * two-digit references up to 10-digit references (1m × 1m square), or fully numeric comma-separated\n * references in metres (eg '438700,114800').\n *\n * @param   {string}    gridref - Standard format OS grid reference.\n * @returns {OsGridRef} Numeric version of grid reference in metres from false origin (SW corner of\n *   supplied grid square).\n * @throws Error on Invalid grid reference.\n *\n * @example\n *   var grid = OsGridRef.parse('TG 51409 13177'); // grid: { easting: 651409, northing: 313177 }\n */\nOsGridRef.parse = function(gridref) {\n    gridref = String(gridref).trim();\n\n    // check for fully numeric comma-separated gridref format\n    var match = gridref.match(/^(\\d+),\\s*(\\d+)$/);\n    if (match) return new OsGridRef(match[1], match[2]);\n\n    // validate format\n    match = gridref.match(/^[A-Z]{2}\\s*[0-9]+\\s*[0-9]+$/i);\n    if (!match) throw new Error('Invalid grid reference');\n\n    // get numeric values of letter references, mapping A->0, B->1, C->2, etc:\n    var l1 = gridref.toUpperCase().charCodeAt(0) - 'A'.charCodeAt(0);\n    var l2 = gridref.toUpperCase().charCodeAt(1) - 'A'.charCodeAt(0);\n    // shuffle down letters after 'I' since 'I' is not used in grid:\n    if (l1 > 7) l1--;\n    if (l2 > 7) l2--;\n\n    // convert grid letters into 100km-square indexes from false origin (grid square SV):\n    var e100km = ((l1-2)%5)*5 + (l2%5);\n    var n100km = (19-Math.floor(l1/5)*5) - Math.floor(l2/5);\n\n    // skip grid letters to get numeric (easting/northing) part of ref\n    var en = gridref.slice(2).trim().split(/\\s+/);\n    // if e/n not whitespace separated, split half way\n    if (en.length == 1) en = [ en[0].slice(0, en[0].length/2), en[0].slice(en[0].length/2) ];\n\n    // validation\n    if (e100km<0 || e100km>6 || n100km<0 || n100km>12) throw new Error('Invalid grid reference');\n    if (en.length != 2) throw new Error('Invalid grid reference');\n    if (en[0].length != en[1].length) throw new Error('Invalid grid reference');\n\n    // standardise to 10-digit refs (metres)\n    en[0] = (en[0]+'00000').slice(0, 5);\n    en[1] = (en[1]+'00000').slice(0, 5);\n\n    var e = e100km + en[0];\n    var n = n100km + en[1];\n\n    return new OsGridRef(e, n);\n};\n\n\n/**\n * Converts ‘this’ numeric grid reference to standard OS grid reference.\n *\n * @param   {number} [digits=10] - Precision of returned grid reference (10 digits = metres).\n * @returns {string} This grid reference in standard format.\n */\nOsGridRef.prototype.toString = function(digits) {\n    digits = (digits === undefined) ? 10 : Number(digits);\n    if (isNaN(digits)) throw new Error('Invalid precision');\n\n    var e = this.easting;\n    var n = this.northing;\n    if (isNaN(e) || isNaN(n)) throw new Error('Invalid grid reference');\n\n    // use digits = 0 to return numeric format (in metres)\n    if (digits == 0) return e.pad(6)+','+n.pad(6);\n\n    // get the 100km-grid indices\n    var e100k = Math.floor(e/100000), n100k = Math.floor(n/100000);\n\n    if (e100k<0 || e100k>6 || n100k<0 || n100k>12) return '';\n\n    // translate those into numeric equivalents of the grid letters\n    var l1 = (19-n100k) - (19-n100k)%5 + Math.floor((e100k+10)/5);\n    var l2 = (19-n100k)*5%25 + e100k%5;\n\n    // compensate for skipped 'I' and build grid letter-pairs\n    if (l1 > 7) l1++;\n    if (l2 > 7) l2++;\n    var letPair = String.fromCharCode(l1+'A'.charCodeAt(0), l2+'A'.charCodeAt(0));\n\n    // strip 100km-grid indices from easting & northing, and reduce precision\n    e = Math.floor((e%100000)/Math.pow(10, 5-digits/2));\n    n = Math.floor((n%100000)/Math.pow(10, 5-digits/2));\n\n    var gridRef = letPair + ' ' + e.pad(digits/2) + ' ' + n.pad(digits/2);\n\n    return gridRef;\n};\n\n\n/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */\n\n/** Polyfill String.trim for old browsers\n *  (q.v. blog.stevenlevithan.com/archives/faster-trim-javascript) */\nif (String.prototype.trim === undefined) {\n    String.prototype.trim = function() {\n        return String(this).replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n    };\n}\n\n/** Extend Number object with method to pad with leading zeros to make it w chars wide\n *  (q.v. stackoverflow.com/questions/2998784 */\nif (Number.prototype.pad === undefined) {\n    Number.prototype.pad = function(w) {\n        var n = this.toString();\n        while (n.length < w) n = '0' + n;\n        return n;\n    };\n}\n\n/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */\nif (typeof module != 'undefined' && module.exports) module.exports = OsGridRef; // ≡ export default OsGridRef\n\n/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */\n/* Vector handling functions                                          (c) Chris Veness 2011-2016  */\n/*                                                                                   MIT Licence  */\n/* www.movable-type.co.uk/scripts/geodesy/docs/module-vector3d.html                               */\n/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */\n\n'use strict';\n\n\n/**\n * Library of 3-d vector manipulation routines.\n *\n * In a geodesy context, these vectors may be used to represent:\n *  - n-vector representing a normal to point on Earth's surface\n *  - earth-centered, earth fixed vector (≡ Gade’s ‘p-vector’)\n *  - great circle normal to vector (on spherical earth model)\n *  - motion vector on Earth's surface\n *  - etc\n *\n * Functions return vectors as return results, so that operations can be chained.\n * @example var v = v1.cross(v2).dot(v3) // ≡ v1×v2⋅v3\n *\n * @module vector3d\n */\n\n\n/**\n * Creates a 3-d vector.\n *\n * The vector may be normalised, or use x/y/z values for eg height relative to the sphere or\n * ellipsoid, distance from earth centre, etc.\n *\n * @constructor\n * @param {number} x - X component of vector.\n * @param {number} y - Y component of vector.\n * @param {number} z - Z component of vector.\n */\nfunction Vector3d(x, y, z) {\n    // allow instantiation without 'new'\n    if (!(this instanceof Vector3d)) return new Vector3d(x, y, z);\n\n    this.x = Number(x);\n    this.y = Number(y);\n    this.z = Number(z);\n}\n\n\n/**\n * Adds supplied vector to ‘this’ vector.\n *\n * @param   {Vector3d} v - Vector to be added to this vector.\n * @returns {Vector3d} Vector representing sum of this and v.\n */\nVector3d.prototype.plus = function(v) {\n    if (!(v instanceof Vector3d)) throw new TypeError('v is not Vector3d object');\n\n    return new Vector3d(this.x + v.x, this.y + v.y, this.z + v.z);\n};\n\n\n/**\n * Subtracts supplied vector from ‘this’ vector.\n *\n * @param   {Vector3d} v - Vector to be subtracted from this vector.\n * @returns {Vector3d} Vector representing difference between this and v.\n */\nVector3d.prototype.minus = function(v) {\n    if (!(v instanceof Vector3d)) throw new TypeError('v is not Vector3d object');\n\n    return new Vector3d(this.x - v.x, this.y - v.y, this.z - v.z);\n};\n\n\n/**\n * Multiplies ‘this’ vector by a scalar value.\n *\n * @param   {number}   x - Factor to multiply this vector by.\n * @returns {Vector3d} Vector scaled by x.\n */\nVector3d.prototype.times = function(x) {\n    x = Number(x);\n\n    return new Vector3d(this.x * x, this.y * x, this.z * x);\n};\n\n\n/**\n * Divides ‘this’ vector by a scalar value.\n *\n * @param   {number}   x - Factor to divide this vector by.\n * @returns {Vector3d} Vector divided by x.\n */\nVector3d.prototype.dividedBy = function(x) {\n    x = Number(x);\n\n    return new Vector3d(this.x / x, this.y / x, this.z / x);\n};\n\n\n/**\n * Multiplies ‘this’ vector by the supplied vector using dot (scalar) product.\n *\n * @param   {Vector3d} v - Vector to be dotted with this vector.\n * @returns {number} Dot product of ‘this’ and v.\n */\nVector3d.prototype.dot = function(v) {\n    if (!(v instanceof Vector3d)) throw new TypeError('v is not Vector3d object');\n\n    return this.x*v.x + this.y*v.y + this.z*v.z;\n};\n\n\n/**\n * Multiplies ‘this’ vector by the supplied vector using cross (vector) product.\n *\n * @param   {Vector3d} v - Vector to be crossed with this vector.\n * @returns {Vector3d} Cross product of ‘this’ and v.\n */\nVector3d.prototype.cross = function(v) {\n    if (!(v instanceof Vector3d)) throw new TypeError('v is not Vector3d object');\n\n    var x = this.y*v.z - this.z*v.y;\n    var y = this.z*v.x - this.x*v.z;\n    var z = this.x*v.y - this.y*v.x;\n\n    return new Vector3d(x, y, z);\n};\n\n\n/**\n * Negates a vector to point in the opposite direction\n *\n * @returns {Vector3d} Negated vector.\n */\nVector3d.prototype.negate = function() {\n    return new Vector3d(-this.x, -this.y, -this.z);\n};\n\n\n/**\n * Length (magnitude or norm) of ‘this’ vector\n *\n * @returns {number} Magnitude of this vector.\n */\nVector3d.prototype.length = function() {\n    return Math.sqrt(this.x*this.x + this.y*this.y + this.z*this.z);\n};\n\n\n/**\n * Normalizes a vector to its unit vector\n * – if the vector is already unit or is zero magnitude, this is a no-op.\n *\n * @returns {Vector3d} Normalised version of this vector.\n */\nVector3d.prototype.unit = function() {\n    var norm = this.length();\n    if (norm == 1) return this;\n    if (norm == 0) return this;\n\n    var x = this.x/norm;\n    var y = this.y/norm;\n    var z = this.z/norm;\n\n    return new Vector3d(x, y, z);\n};\n\n\n/**\n * Calculates the angle between ‘this’ vector and supplied vector.\n *\n * @param   {Vector3d} v\n * @param   {Vector3d} [vSign] - If supplied (and out of plane of this and v), angle is signed +ve if\n *     this->v is clockwise looking along vSign, -ve in opposite direction (otherwise unsigned angle).\n * @returns {number} Angle (in radians) between this vector and supplied vector.\n */\nVector3d.prototype.angleTo = function(v, vSign) {\n    if (!(v instanceof Vector3d)) throw new TypeError('v is not Vector3d object');\n\n    var sinθ = this.cross(v).length();\n    var cosθ = this.dot(v);\n\n    if (vSign !== undefined) {\n        if (!(vSign instanceof Vector3d)) throw new TypeError('vSign is not Vector3d object');\n        // use vSign as reference to get sign of sinθ\n        sinθ = this.cross(v).dot(vSign)<0 ? -sinθ : sinθ;\n    }\n\n    return Math.atan2(sinθ, cosθ);\n};\n\n\n/**\n * Rotates ‘this’ point around an axis by a specified angle.\n *\n * @param   {Vector3d} axis - The axis being rotated around.\n * @param   {number}   theta - The angle of rotation (in radians).\n * @returns {Vector3d} The rotated point.\n */\nVector3d.prototype.rotateAround = function(axis, theta) {\n    if (!(axis instanceof Vector3d)) throw new TypeError('axis is not Vector3d object');\n\n    // en.wikipedia.org/wiki/Rotation_matrix#Rotation_matrix_from_axis_and_angle\n    // en.wikipedia.org/wiki/Quaternions_and_spatial_rotation#Quaternion-derived_rotation_matrix\n    var p1 = this.unit();\n    var p = [ p1.x, p1.y, p1.z ]; // the point being rotated\n    var a = axis.unit();          // the axis being rotated around\n    var s = Math.sin(theta);\n    var c = Math.cos(theta);\n    // quaternion-derived rotation matrix\n    var q = [\n        [ a.x*a.x*(1-c) + c,     a.x*a.y*(1-c) - a.z*s, a.x*a.z*(1-c) + a.y*s],\n        [ a.y*a.x*(1-c) + a.z*s, a.y*a.y*(1-c) + c,     a.y*a.z*(1-c) - a.x*s],\n        [ a.z*a.x*(1-c) - a.y*s, a.z*a.y*(1-c) + a.x*s, a.z*a.z*(1-c) + c    ],\n    ];\n    // multiply q × p\n    var qp = [0, 0, 0];\n    for (var i=0; i<3; i++) {\n        for (var j=0; j<3; j++) {\n            qp[i] += q[i][j] * p[j];\n        }\n    }\n    var p2 = new Vector3d(qp[0], qp[1], qp[2]);\n    return p2;\n    // qv en.wikipedia.org/wiki/Rodrigues'_rotation_formula...\n};\n\n\n/**\n * String representation of vector.\n *\n * @param   {number} [precision=3] - Number of decimal places to be used.\n * @returns {string} Vector represented as [x,y,z].\n */\nVector3d.prototype.toString = function(precision) {\n    var p = (precision === undefined) ? 3 : Number(precision);\n\n    var str = '[' + this.x.toFixed(p) + ',' + this.y.toFixed(p) + ',' + this.z.toFixed(p) + ']';\n\n    return str;\n};\n\n\n/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  */\nif (typeof module != 'undefined' && module.exports) module.exports = Vector3d; // ≡ export default Vector3d\n\n(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var list = this.map[name]\n    if (!list) {\n      list = []\n      this.map[name] = list\n    }\n    list.push(value)\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    var values = this.map[normalizeName(name)]\n    return values ? values[0] : null\n  }\n\n  Headers.prototype.getAll = function(name) {\n    return this.map[normalizeName(name)] || []\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = [normalizeValue(value)]\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    Object.getOwnPropertyNames(this.map).forEach(function(name) {\n      this.map[name].forEach(function(value) {\n        callback.call(thisArg, value, name, this)\n      }, this)\n    }, this)\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    reader.readAsArrayBuffer(blob)\n    return fileReaderReady(reader)\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    reader.readAsText(blob)\n    return fileReaderReady(reader)\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (!body) {\n        this._bodyText = ''\n      } else if (support.arrayBuffer && ArrayBuffer.prototype.isPrototypeOf(body)) {\n        // Only support ArrayBuffers for POST method.\n        // Receiving ArrayBuffers happens via Blobs, instead.\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n\n      this.text = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return readBlobAsText(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as text')\n        } else {\n          return Promise.resolve(this._bodyText)\n        }\n      }\n    } else {\n      this.text = function() {\n        var rejected = consumed(this)\n        return rejected ? rejected : Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n    if (Request.prototype.isPrototypeOf(input)) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = input\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this)\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function headers(xhr) {\n    var head = new Headers()\n    var pairs = (xhr.getAllResponseHeaders() || '').trim().split('\\n')\n    pairs.forEach(function(header) {\n      var split = header.trim().split(':')\n      var key = split.shift().trim()\n      var value = split.join(':').trim()\n      head.append(key, value)\n    })\n    return head\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = options.statusText\n    this.headers = options.headers instanceof Headers ? options.headers : new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request\n      if (Request.prototype.isPrototypeOf(input) && !init) {\n        request = input\n      } else {\n        request = new Request(input, init)\n      }\n\n      var xhr = new XMLHttpRequest()\n\n      function responseURL() {\n        if ('responseURL' in xhr) {\n          return xhr.responseURL\n        }\n\n        // Avoid security warnings on getResponseHeader when not allowed by CORS\n        if (/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())) {\n          return xhr.getResponseHeader('X-Request-URL')\n        }\n\n        return\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: headers(xhr),\n          url: responseURL()\n        }\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n\n/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE\n * @version   3.0.2\n */\n\n(function() {\n    \"use strict\";\n    function lib$es6$promise$utils$$objectOrFunction(x) {\n      return typeof x === 'function' || (typeof x === 'object' && x !== null);\n    }\n\n    function lib$es6$promise$utils$$isFunction(x) {\n      return typeof x === 'function';\n    }\n\n    function lib$es6$promise$utils$$isMaybeThenable(x) {\n      return typeof x === 'object' && x !== null;\n    }\n\n    var lib$es6$promise$utils$$_isArray;\n    if (!Array.isArray) {\n      lib$es6$promise$utils$$_isArray = function (x) {\n        return Object.prototype.toString.call(x) === '[object Array]';\n      };\n    } else {\n      lib$es6$promise$utils$$_isArray = Array.isArray;\n    }\n\n    var lib$es6$promise$utils$$isArray = lib$es6$promise$utils$$_isArray;\n    var lib$es6$promise$asap$$len = 0;\n    var lib$es6$promise$asap$$toString = {}.toString;\n    var lib$es6$promise$asap$$vertxNext;\n    var lib$es6$promise$asap$$customSchedulerFn;\n\n    var lib$es6$promise$asap$$asap = function asap(callback, arg) {\n      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len] = callback;\n      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len + 1] = arg;\n      lib$es6$promise$asap$$len += 2;\n      if (lib$es6$promise$asap$$len === 2) {\n        // If len is 2, that means that we need to schedule an async flush.\n        // If additional callbacks are queued before the queue is flushed, they\n        // will be processed by this flush that we are scheduling.\n        if (lib$es6$promise$asap$$customSchedulerFn) {\n          lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush);\n        } else {\n          lib$es6$promise$asap$$scheduleFlush();\n        }\n      }\n    }\n\n    function lib$es6$promise$asap$$setScheduler(scheduleFn) {\n      lib$es6$promise$asap$$customSchedulerFn = scheduleFn;\n    }\n\n    function lib$es6$promise$asap$$setAsap(asapFn) {\n      lib$es6$promise$asap$$asap = asapFn;\n    }\n\n    var lib$es6$promise$asap$$browserWindow = (typeof window !== 'undefined') ? window : undefined;\n    var lib$es6$promise$asap$$browserGlobal = lib$es6$promise$asap$$browserWindow || {};\n    var lib$es6$promise$asap$$BrowserMutationObserver = lib$es6$promise$asap$$browserGlobal.MutationObserver || lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver;\n    var lib$es6$promise$asap$$isNode = typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n    // test for web worker but not in IE10\n    var lib$es6$promise$asap$$isWorker = typeof Uint8ClampedArray !== 'undefined' &&\n      typeof importScripts !== 'undefined' &&\n      typeof MessageChannel !== 'undefined';\n\n    // node\n    function lib$es6$promise$asap$$useNextTick() {\n      // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n      // see https://github.com/cujojs/when/issues/410 for details\n      return function() {\n        process.nextTick(lib$es6$promise$asap$$flush);\n      };\n    }\n\n    // vertx\n    function lib$es6$promise$asap$$useVertxTimer() {\n      return function() {\n        lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush);\n      };\n    }\n\n    function lib$es6$promise$asap$$useMutationObserver() {\n      var iterations = 0;\n      var observer = new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush);\n      var node = document.createTextNode('');\n      observer.observe(node, { characterData: true });\n\n      return function() {\n        node.data = (iterations = ++iterations % 2);\n      };\n    }\n\n    // web worker\n    function lib$es6$promise$asap$$useMessageChannel() {\n      var channel = new MessageChannel();\n      channel.port1.onmessage = lib$es6$promise$asap$$flush;\n      return function () {\n        channel.port2.postMessage(0);\n      };\n    }\n\n    function lib$es6$promise$asap$$useSetTimeout() {\n      return function() {\n        setTimeout(lib$es6$promise$asap$$flush, 1);\n      };\n    }\n\n    var lib$es6$promise$asap$$queue = new Array(1000);\n    function lib$es6$promise$asap$$flush() {\n      for (var i = 0; i < lib$es6$promise$asap$$len; i+=2) {\n        var callback = lib$es6$promise$asap$$queue[i];\n        var arg = lib$es6$promise$asap$$queue[i+1];\n\n        callback(arg);\n\n        lib$es6$promise$asap$$queue[i] = undefined;\n        lib$es6$promise$asap$$queue[i+1] = undefined;\n      }\n\n      lib$es6$promise$asap$$len = 0;\n    }\n\n    function lib$es6$promise$asap$$attemptVertx() {\n      try {\n        var r = require;\n        var vertx = r('vertx');\n        lib$es6$promise$asap$$vertxNext = vertx.runOnLoop || vertx.runOnContext;\n        return lib$es6$promise$asap$$useVertxTimer();\n      } catch(e) {\n        return lib$es6$promise$asap$$useSetTimeout();\n      }\n    }\n\n    var lib$es6$promise$asap$$scheduleFlush;\n    // Decide what async method to use to triggering processing of queued callbacks:\n    if (lib$es6$promise$asap$$isNode) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useNextTick();\n    } else if (lib$es6$promise$asap$$BrowserMutationObserver) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMutationObserver();\n    } else if (lib$es6$promise$asap$$isWorker) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMessageChannel();\n    } else if (lib$es6$promise$asap$$browserWindow === undefined && typeof require === 'function') {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$attemptVertx();\n    } else {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useSetTimeout();\n    }\n\n    function lib$es6$promise$$internal$$noop() {}\n\n    var lib$es6$promise$$internal$$PENDING   = void 0;\n    var lib$es6$promise$$internal$$FULFILLED = 1;\n    var lib$es6$promise$$internal$$REJECTED  = 2;\n\n    var lib$es6$promise$$internal$$GET_THEN_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n    function lib$es6$promise$$internal$$selfFulfillment() {\n      return new TypeError(\"You cannot resolve a promise with itself\");\n    }\n\n    function lib$es6$promise$$internal$$cannotReturnOwn() {\n      return new TypeError('A promises callback cannot return that same promise.');\n    }\n\n    function lib$es6$promise$$internal$$getThen(promise) {\n      try {\n        return promise.then;\n      } catch(error) {\n        lib$es6$promise$$internal$$GET_THEN_ERROR.error = error;\n        return lib$es6$promise$$internal$$GET_THEN_ERROR;\n      }\n    }\n\n    function lib$es6$promise$$internal$$tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n      try {\n        then.call(value, fulfillmentHandler, rejectionHandler);\n      } catch(e) {\n        return e;\n      }\n    }\n\n    function lib$es6$promise$$internal$$handleForeignThenable(promise, thenable, then) {\n       lib$es6$promise$asap$$asap(function(promise) {\n        var sealed = false;\n        var error = lib$es6$promise$$internal$$tryThen(then, thenable, function(value) {\n          if (sealed) { return; }\n          sealed = true;\n          if (thenable !== value) {\n            lib$es6$promise$$internal$$resolve(promise, value);\n          } else {\n            lib$es6$promise$$internal$$fulfill(promise, value);\n          }\n        }, function(reason) {\n          if (sealed) { return; }\n          sealed = true;\n\n          lib$es6$promise$$internal$$reject(promise, reason);\n        }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n        if (!sealed && error) {\n          sealed = true;\n          lib$es6$promise$$internal$$reject(promise, error);\n        }\n      }, promise);\n    }\n\n    function lib$es6$promise$$internal$$handleOwnThenable(promise, thenable) {\n      if (thenable._state === lib$es6$promise$$internal$$FULFILLED) {\n        lib$es6$promise$$internal$$fulfill(promise, thenable._result);\n      } else if (thenable._state === lib$es6$promise$$internal$$REJECTED) {\n        lib$es6$promise$$internal$$reject(promise, thenable._result);\n      } else {\n        lib$es6$promise$$internal$$subscribe(thenable, undefined, function(value) {\n          lib$es6$promise$$internal$$resolve(promise, value);\n        }, function(reason) {\n          lib$es6$promise$$internal$$reject(promise, reason);\n        });\n      }\n    }\n\n    function lib$es6$promise$$internal$$handleMaybeThenable(promise, maybeThenable) {\n      if (maybeThenable.constructor === promise.constructor) {\n        lib$es6$promise$$internal$$handleOwnThenable(promise, maybeThenable);\n      } else {\n        var then = lib$es6$promise$$internal$$getThen(maybeThenable);\n\n        if (then === lib$es6$promise$$internal$$GET_THEN_ERROR) {\n          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$GET_THEN_ERROR.error);\n        } else if (then === undefined) {\n          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n        } else if (lib$es6$promise$utils$$isFunction(then)) {\n          lib$es6$promise$$internal$$handleForeignThenable(promise, maybeThenable, then);\n        } else {\n          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n        }\n      }\n    }\n\n    function lib$es6$promise$$internal$$resolve(promise, value) {\n      if (promise === value) {\n        lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$selfFulfillment());\n      } else if (lib$es6$promise$utils$$objectOrFunction(value)) {\n        lib$es6$promise$$internal$$handleMaybeThenable(promise, value);\n      } else {\n        lib$es6$promise$$internal$$fulfill(promise, value);\n      }\n    }\n\n    function lib$es6$promise$$internal$$publishRejection(promise) {\n      if (promise._onerror) {\n        promise._onerror(promise._result);\n      }\n\n      lib$es6$promise$$internal$$publish(promise);\n    }\n\n    function lib$es6$promise$$internal$$fulfill(promise, value) {\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }\n\n      promise._result = value;\n      promise._state = lib$es6$promise$$internal$$FULFILLED;\n\n      if (promise._subscribers.length !== 0) {\n        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, promise);\n      }\n    }\n\n    function lib$es6$promise$$internal$$reject(promise, reason) {\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }\n      promise._state = lib$es6$promise$$internal$$REJECTED;\n      promise._result = reason;\n\n      lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection, promise);\n    }\n\n    function lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection) {\n      var subscribers = parent._subscribers;\n      var length = subscribers.length;\n\n      parent._onerror = null;\n\n      subscribers[length] = child;\n      subscribers[length + lib$es6$promise$$internal$$FULFILLED] = onFulfillment;\n      subscribers[length + lib$es6$promise$$internal$$REJECTED]  = onRejection;\n\n      if (length === 0 && parent._state) {\n        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, parent);\n      }\n    }\n\n    function lib$es6$promise$$internal$$publish(promise) {\n      var subscribers = promise._subscribers;\n      var settled = promise._state;\n\n      if (subscribers.length === 0) { return; }\n\n      var child, callback, detail = promise._result;\n\n      for (var i = 0; i < subscribers.length; i += 3) {\n        child = subscribers[i];\n        callback = subscribers[i + settled];\n\n        if (child) {\n          lib$es6$promise$$internal$$invokeCallback(settled, child, callback, detail);\n        } else {\n          callback(detail);\n        }\n      }\n\n      promise._subscribers.length = 0;\n    }\n\n    function lib$es6$promise$$internal$$ErrorObject() {\n      this.error = null;\n    }\n\n    var lib$es6$promise$$internal$$TRY_CATCH_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n    function lib$es6$promise$$internal$$tryCatch(callback, detail) {\n      try {\n        return callback(detail);\n      } catch(e) {\n        lib$es6$promise$$internal$$TRY_CATCH_ERROR.error = e;\n        return lib$es6$promise$$internal$$TRY_CATCH_ERROR;\n      }\n    }\n\n    function lib$es6$promise$$internal$$invokeCallback(settled, promise, callback, detail) {\n      var hasCallback = lib$es6$promise$utils$$isFunction(callback),\n          value, error, succeeded, failed;\n\n      if (hasCallback) {\n        value = lib$es6$promise$$internal$$tryCatch(callback, detail);\n\n        if (value === lib$es6$promise$$internal$$TRY_CATCH_ERROR) {\n          failed = true;\n          error = value.error;\n          value = null;\n        } else {\n          succeeded = true;\n        }\n\n        if (promise === value) {\n          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$cannotReturnOwn());\n          return;\n        }\n\n      } else {\n        value = detail;\n        succeeded = true;\n      }\n\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) {\n        // noop\n      } else if (hasCallback && succeeded) {\n        lib$es6$promise$$internal$$resolve(promise, value);\n      } else if (failed) {\n        lib$es6$promise$$internal$$reject(promise, error);\n      } else if (settled === lib$es6$promise$$internal$$FULFILLED) {\n        lib$es6$promise$$internal$$fulfill(promise, value);\n      } else if (settled === lib$es6$promise$$internal$$REJECTED) {\n        lib$es6$promise$$internal$$reject(promise, value);\n      }\n    }\n\n    function lib$es6$promise$$internal$$initializePromise(promise, resolver) {\n      try {\n        resolver(function resolvePromise(value){\n          lib$es6$promise$$internal$$resolve(promise, value);\n        }, function rejectPromise(reason) {\n          lib$es6$promise$$internal$$reject(promise, reason);\n        });\n      } catch(e) {\n        lib$es6$promise$$internal$$reject(promise, e);\n      }\n    }\n\n    function lib$es6$promise$enumerator$$Enumerator(Constructor, input) {\n      var enumerator = this;\n\n      enumerator._instanceConstructor = Constructor;\n      enumerator.promise = new Constructor(lib$es6$promise$$internal$$noop);\n\n      if (enumerator._validateInput(input)) {\n        enumerator._input     = input;\n        enumerator.length     = input.length;\n        enumerator._remaining = input.length;\n\n        enumerator._init();\n\n        if (enumerator.length === 0) {\n          lib$es6$promise$$internal$$fulfill(enumerator.promise, enumerator._result);\n        } else {\n          enumerator.length = enumerator.length || 0;\n          enumerator._enumerate();\n          if (enumerator._remaining === 0) {\n            lib$es6$promise$$internal$$fulfill(enumerator.promise, enumerator._result);\n          }\n        }\n      } else {\n        lib$es6$promise$$internal$$reject(enumerator.promise, enumerator._validationError());\n      }\n    }\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._validateInput = function(input) {\n      return lib$es6$promise$utils$$isArray(input);\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._validationError = function() {\n      return new Error('Array Methods must be provided an Array');\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._init = function() {\n      this._result = new Array(this.length);\n    };\n\n    var lib$es6$promise$enumerator$$default = lib$es6$promise$enumerator$$Enumerator;\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._enumerate = function() {\n      var enumerator = this;\n\n      var length  = enumerator.length;\n      var promise = enumerator.promise;\n      var input   = enumerator._input;\n\n      for (var i = 0; promise._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {\n        enumerator._eachEntry(input[i], i);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry = function(entry, i) {\n      var enumerator = this;\n      var c = enumerator._instanceConstructor;\n\n      if (lib$es6$promise$utils$$isMaybeThenable(entry)) {\n        if (entry.constructor === c && entry._state !== lib$es6$promise$$internal$$PENDING) {\n          entry._onerror = null;\n          enumerator._settledAt(entry._state, i, entry._result);\n        } else {\n          enumerator._willSettleAt(c.resolve(entry), i);\n        }\n      } else {\n        enumerator._remaining--;\n        enumerator._result[i] = entry;\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._settledAt = function(state, i, value) {\n      var enumerator = this;\n      var promise = enumerator.promise;\n\n      if (promise._state === lib$es6$promise$$internal$$PENDING) {\n        enumerator._remaining--;\n\n        if (state === lib$es6$promise$$internal$$REJECTED) {\n          lib$es6$promise$$internal$$reject(promise, value);\n        } else {\n          enumerator._result[i] = value;\n        }\n      }\n\n      if (enumerator._remaining === 0) {\n        lib$es6$promise$$internal$$fulfill(promise, enumerator._result);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt = function(promise, i) {\n      var enumerator = this;\n\n      lib$es6$promise$$internal$$subscribe(promise, undefined, function(value) {\n        enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED, i, value);\n      }, function(reason) {\n        enumerator._settledAt(lib$es6$promise$$internal$$REJECTED, i, reason);\n      });\n    };\n    function lib$es6$promise$promise$all$$all(entries) {\n      return new lib$es6$promise$enumerator$$default(this, entries).promise;\n    }\n    var lib$es6$promise$promise$all$$default = lib$es6$promise$promise$all$$all;\n    function lib$es6$promise$promise$race$$race(entries) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n\n      if (!lib$es6$promise$utils$$isArray(entries)) {\n        lib$es6$promise$$internal$$reject(promise, new TypeError('You must pass an array to race.'));\n        return promise;\n      }\n\n      var length = entries.length;\n\n      function onFulfillment(value) {\n        lib$es6$promise$$internal$$resolve(promise, value);\n      }\n\n      function onRejection(reason) {\n        lib$es6$promise$$internal$$reject(promise, reason);\n      }\n\n      for (var i = 0; promise._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {\n        lib$es6$promise$$internal$$subscribe(Constructor.resolve(entries[i]), undefined, onFulfillment, onRejection);\n      }\n\n      return promise;\n    }\n    var lib$es6$promise$promise$race$$default = lib$es6$promise$promise$race$$race;\n    function lib$es6$promise$promise$resolve$$resolve(object) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      if (object && typeof object === 'object' && object.constructor === Constructor) {\n        return object;\n      }\n\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n      lib$es6$promise$$internal$$resolve(promise, object);\n      return promise;\n    }\n    var lib$es6$promise$promise$resolve$$default = lib$es6$promise$promise$resolve$$resolve;\n    function lib$es6$promise$promise$reject$$reject(reason) {\n      /*jshint validthis:true */\n      var Constructor = this;\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n      lib$es6$promise$$internal$$reject(promise, reason);\n      return promise;\n    }\n    var lib$es6$promise$promise$reject$$default = lib$es6$promise$promise$reject$$reject;\n\n    var lib$es6$promise$promise$$counter = 0;\n\n    function lib$es6$promise$promise$$needsResolver() {\n      throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n    }\n\n    function lib$es6$promise$promise$$needsNew() {\n      throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n    }\n\n    var lib$es6$promise$promise$$default = lib$es6$promise$promise$$Promise;\n    /**\n      Promise objects represent the eventual result of an asynchronous operation. The\n      primary way of interacting with a promise is through its `then` method, which\n      registers callbacks to receive either a promise's eventual value or the reason\n      why the promise cannot be fulfilled.\n\n      Terminology\n      -----------\n\n      - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n      - `thenable` is an object or function that defines a `then` method.\n      - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n      - `exception` is a value that is thrown using the throw statement.\n      - `reason` is a value that indicates why a promise was rejected.\n      - `settled` the final resting state of a promise, fulfilled or rejected.\n\n      A promise can be in one of three states: pending, fulfilled, or rejected.\n\n      Promises that are fulfilled have a fulfillment value and are in the fulfilled\n      state.  Promises that are rejected have a rejection reason and are in the\n      rejected state.  A fulfillment value is never a thenable.\n\n      Promises can also be said to *resolve* a value.  If this value is also a\n      promise, then the original promise's settled state will match the value's\n      settled state.  So a promise that *resolves* a promise that rejects will\n      itself reject, and a promise that *resolves* a promise that fulfills will\n      itself fulfill.\n\n\n      Basic Usage:\n      ------------\n\n      ```js\n      var promise = new Promise(function(resolve, reject) {\n        // on success\n        resolve(value);\n\n        // on failure\n        reject(reason);\n      });\n\n      promise.then(function(value) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Advanced Usage:\n      ---------------\n\n      Promises shine when abstracting away asynchronous interactions such as\n      `XMLHttpRequest`s.\n\n      ```js\n      function getJSON(url) {\n        return new Promise(function(resolve, reject){\n          var xhr = new XMLHttpRequest();\n\n          xhr.open('GET', url);\n          xhr.onreadystatechange = handler;\n          xhr.responseType = 'json';\n          xhr.setRequestHeader('Accept', 'application/json');\n          xhr.send();\n\n          function handler() {\n            if (this.readyState === this.DONE) {\n              if (this.status === 200) {\n                resolve(this.response);\n              } else {\n                reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n              }\n            }\n          };\n        });\n      }\n\n      getJSON('/posts.json').then(function(json) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Unlike callbacks, promises are great composable primitives.\n\n      ```js\n      Promise.all([\n        getJSON('/posts'),\n        getJSON('/comments')\n      ]).then(function(values){\n        values[0] // => postsJSON\n        values[1] // => commentsJSON\n\n        return values;\n      });\n      ```\n\n      @class Promise\n      @param {function} resolver\n      Useful for tooling.\n      @constructor\n    */\n    function lib$es6$promise$promise$$Promise(resolver) {\n      this._id = lib$es6$promise$promise$$counter++;\n      this._state = undefined;\n      this._result = undefined;\n      this._subscribers = [];\n\n      if (lib$es6$promise$$internal$$noop !== resolver) {\n        if (!lib$es6$promise$utils$$isFunction(resolver)) {\n          lib$es6$promise$promise$$needsResolver();\n        }\n\n        if (!(this instanceof lib$es6$promise$promise$$Promise)) {\n          lib$es6$promise$promise$$needsNew();\n        }\n\n        lib$es6$promise$$internal$$initializePromise(this, resolver);\n      }\n    }\n\n    lib$es6$promise$promise$$Promise.all = lib$es6$promise$promise$all$$default;\n    lib$es6$promise$promise$$Promise.race = lib$es6$promise$promise$race$$default;\n    lib$es6$promise$promise$$Promise.resolve = lib$es6$promise$promise$resolve$$default;\n    lib$es6$promise$promise$$Promise.reject = lib$es6$promise$promise$reject$$default;\n    lib$es6$promise$promise$$Promise._setScheduler = lib$es6$promise$asap$$setScheduler;\n    lib$es6$promise$promise$$Promise._setAsap = lib$es6$promise$asap$$setAsap;\n    lib$es6$promise$promise$$Promise._asap = lib$es6$promise$asap$$asap;\n\n    lib$es6$promise$promise$$Promise.prototype = {\n      constructor: lib$es6$promise$promise$$Promise,\n\n    /**\n      The primary way of interacting with a promise is through its `then` method,\n      which registers callbacks to receive either a promise's eventual value or the\n      reason why the promise cannot be fulfilled.\n\n      ```js\n      findUser().then(function(user){\n        // user is available\n      }, function(reason){\n        // user is unavailable, and you are given the reason why\n      });\n      ```\n\n      Chaining\n      --------\n\n      The return value of `then` is itself a promise.  This second, 'downstream'\n      promise is resolved with the return value of the first promise's fulfillment\n      or rejection handler, or rejected if the handler throws an exception.\n\n      ```js\n      findUser().then(function (user) {\n        return user.name;\n      }, function (reason) {\n        return 'default name';\n      }).then(function (userName) {\n        // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n        // will be `'default name'`\n      });\n\n      findUser().then(function (user) {\n        throw new Error('Found user, but still unhappy');\n      }, function (reason) {\n        throw new Error('`findUser` rejected and we're unhappy');\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n        // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n      });\n      ```\n      If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n\n      ```js\n      findUser().then(function (user) {\n        throw new PedagogicalException('Upstream error');\n      }).then(function (value) {\n        // never reached\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // The `PedgagocialException` is propagated all the way down to here\n      });\n      ```\n\n      Assimilation\n      ------------\n\n      Sometimes the value you want to propagate to a downstream promise can only be\n      retrieved asynchronously. This can be achieved by returning a promise in the\n      fulfillment or rejection handler. The downstream promise will then be pending\n      until the returned promise is settled. This is called *assimilation*.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // The user's comments are now available\n      });\n      ```\n\n      If the assimliated promise rejects, then the downstream promise will also reject.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // If `findCommentsByAuthor` fulfills, we'll have the value here\n      }, function (reason) {\n        // If `findCommentsByAuthor` rejects, we'll have the reason here\n      });\n      ```\n\n      Simple Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var result;\n\n      try {\n        result = findResult();\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n      findResult(function(result, err){\n        if (err) {\n          // failure\n        } else {\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findResult().then(function(result){\n        // success\n      }, function(reason){\n        // failure\n      });\n      ```\n\n      Advanced Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var author, books;\n\n      try {\n        author = findAuthor();\n        books  = findBooksByAuthor(author);\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n\n      function foundBooks(books) {\n\n      }\n\n      function failure(reason) {\n\n      }\n\n      findAuthor(function(author, err){\n        if (err) {\n          failure(err);\n          // failure\n        } else {\n          try {\n            findBoooksByAuthor(author, function(books, err) {\n              if (err) {\n                failure(err);\n              } else {\n                try {\n                  foundBooks(books);\n                } catch(reason) {\n                  failure(reason);\n                }\n              }\n            });\n          } catch(error) {\n            failure(err);\n          }\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findAuthor().\n        then(findBooksByAuthor).\n        then(function(books){\n          // found books\n      }).catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method then\n      @param {Function} onFulfilled\n      @param {Function} onRejected\n      Useful for tooling.\n      @return {Promise}\n    */\n      then: function(onFulfillment, onRejection) {\n        var parent = this;\n        var state = parent._state;\n\n        if (state === lib$es6$promise$$internal$$FULFILLED && !onFulfillment || state === lib$es6$promise$$internal$$REJECTED && !onRejection) {\n          return this;\n        }\n\n        var child = new this.constructor(lib$es6$promise$$internal$$noop);\n        var result = parent._result;\n\n        if (state) {\n          var callback = arguments[state - 1];\n          lib$es6$promise$asap$$asap(function(){\n            lib$es6$promise$$internal$$invokeCallback(state, child, callback, result);\n          });\n        } else {\n          lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection);\n        }\n\n        return child;\n      },\n\n    /**\n      `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n      as the catch block of a try/catch statement.\n\n      ```js\n      function findAuthor(){\n        throw new Error('couldn't find that author');\n      }\n\n      // synchronous\n      try {\n        findAuthor();\n      } catch(reason) {\n        // something went wrong\n      }\n\n      // async with promises\n      findAuthor().catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method catch\n      @param {Function} onRejection\n      Useful for tooling.\n      @return {Promise}\n    */\n      'catch': function(onRejection) {\n        return this.then(null, onRejection);\n      }\n    };\n    function lib$es6$promise$polyfill$$polyfill() {\n      var local;\n\n      if (typeof global !== 'undefined') {\n          local = global;\n      } else if (typeof self !== 'undefined') {\n          local = self;\n      } else {\n          try {\n              local = Function('return this')();\n          } catch (e) {\n              throw new Error('polyfill failed because global object is unavailable in this environment');\n          }\n      }\n\n      var P = local.Promise;\n\n      if (P && Object.prototype.toString.call(P.resolve()) === '[object Promise]' && !P.cast) {\n        return;\n      }\n\n      local.Promise = lib$es6$promise$promise$$default;\n    }\n    var lib$es6$promise$polyfill$$default = lib$es6$promise$polyfill$$polyfill;\n\n    var lib$es6$promise$umd$$ES6Promise = {\n      'Promise': lib$es6$promise$promise$$default,\n      'polyfill': lib$es6$promise$polyfill$$default\n    };\n\n    /* global define:true module:true window: true */\n    if (typeof define === 'function' && define['amd']) {\n      define(function() { return lib$es6$promise$umd$$ES6Promise; });\n    } else if (typeof module !== 'undefined' && module['exports']) {\n      module['exports'] = lib$es6$promise$umd$$ES6Promise;\n    } else if (typeof this !== 'undefined') {\n      this['ES6Promise'] = lib$es6$promise$umd$$ES6Promise;\n    }\n\n    lib$es6$promise$polyfill$$default();\n}).call(this);\n\n"],"sourceRoot":"/source/"}